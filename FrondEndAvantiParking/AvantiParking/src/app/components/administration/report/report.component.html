<button class="botonF1" routerLink="">
  <span><i class="fas fa-arrow-left    "></i></span>
</button>
<div class="container">
  <br>
  <section class="jumbotronHeader col-md-12 mb-4 jumbotron  justify-content-center text-center">
    <h3 class="font-weight-bold"> REPORTS</h3>
  </section>

  <div id="wrapper">
    <div id="content-wrapper" class="d-flex flex-column">
      <div id="content">
        <div class="container-fluid">

          <div class="row">
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Headquarter</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countHeadquarter}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-home fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-warning  text-uppercase mb-1">Parking</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countParking}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-parking fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Zones</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countZone}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-map-marker fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Spaces</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countSpaces}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-map-pin fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-6 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Users</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countUsers}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-users fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-6 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Reservations</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{countReservations}}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-bookmark fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <hr>
  <br>
  <p class="text-center">
    Generate a report by dates, this report will include the data of each place,
    which will break down relevant information on the use of parking spaces, in addition to all active reservations
    and those that are no longer active, with the respective username.
    <br>
    In addition, we will give you the possibility to search for an element that
    you want to find in the result of the report, with the possibility of downloading it in an Excel sheet.
  </p>
  <br>
  <div class="row  justify-content-center">
    <div class="col-md-4 col-sm-6">
      <label>Initial date</label>
      <form class="form-inline">
        <div class="form-group">
          <div class="input-group">
            <input class="form-control" placeholder="dd/mm/yyyy" name="d1" #c2="ngModel" [minDate]="minDate" readonly
              [maxDate]="maxDate" [(ngModel)]="initDate" (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="d1.toggle()" type="button"></button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="col-md-4 col-sm-6">
      <label>Final date</label>
      <form class="form-inline">
        <div class="form-group">
          <div class="input-group">
            <input class="form-control" placeholder="dd/mm/yyyy" name="d2" #c2="ngModel" [minDate]="minDate" readonly
              [maxDate]="maxDate" [(ngModel)]="finalDate" (click)="d2.toggle()" ngbDatepicker #d2="ngbDatepicker">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="d2.toggle()" type="button"></button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="col-md-4">
      <br>
      <button class="btn btn-delete btn-block mt-2 btn-outline-danger" (click)="generateReport()">
        <strong>Generate report</strong>
      </button>
    </div>
  </div>
</div>
<div class="container" *ngIf="reportComplete.length>0">
  <div class="text-center">
    <h1><STRONG>REPORT</STRONG> </h1>
  </div>
  <div class="row">
    <div class="col-sm-4 col-md-6 mt-3">
      <input type="text" class="form-control" name="filterReport" placeholder="Search..." maxlength="40"
        [(ngModel)]="filter">
    </div>
    <div class="col-sm-8 col-md-6 mt-3">
      <div class="d-sm-flex align-items-center text-white justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800"></h1>
        <a (click)="sendEmail()" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
            class="fas fa-download fa-sm text-white"></i>Send report to email</a>
      </div>
    </div>
  </div>
  <div id="report">
    <div class="table-responsive justify-content-center" hidden>
      <table class="table table-bordered table-hover">
        <thead class="tableThead thead">
          <tr>
            <th class="text-center" COLSPAN="3" ><strong>ACTIVE USERS</strong></th>
          </tr>
          <tr>
            <th ><strong>ID</strong></th>
            <th ><strong>NAME</strong></th>
            <th ><strong>EMAIL</strong></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of activeUser">
            <td class="text-center">{{i.id}}</td>
            <td class="text-center">{{i.name}}</td>
            <td class="text-center">{{i.email}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="table-responsive" style="overflow:scroll;height:400px;width:auto;">
      <table class="table table-bordered table-hover" style="width:500px;"  border=1>
        <thead class="tableThead thead">
          <tr>
            <th class="text-center" COLSPAN="10" ><strong>RESERVES</strong></th>
          </tr>
          <tr>
            <th style="width:600px" ><strong>USER EMAIL</strong></th>
            <th style="width:500px" ><strong>DATE</strong></th>
            <th style="width:500px" ><strong>START TIME</strong></th>
            <th style="width:500px" ><strong>END TIME</strong></th>
            <th style="width:500px" ><strong>EXTEND DATE</strong></th>
            <th style="width:500px" ><strong>VEHICLE</strong></th>
            <th style="width:500px" ><strong>HEADQUARTER</strong></th>
            <th style="width:500px" ><strong>PARKING LOT</strong></th>
            <th style="width:500px" ><strong>ZONE</strong></th>
            <th style="width:500px" ><strong>SPACE</strong></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of reportComplete  | ReportPipe:filter">
            <td style="width:600px" class="text-center">{{i.reserve.user.email}}</td>
            <td style="width:500px" class="text-center">{{i.date}}</td>
            <td style="width:500px" class="text-center">{{i.start_time}}</td>
            <td style="width:500px" class="text-center">{{i.end_time}}</td>
            <td style="width:500px" class="text-center">{{i.end_date_extend}}</td>
            <td style="width:500px" class="text-center" *ngIf="i.reserve.vehicle!=null">{{i.reserve.vehicle.license_plate}}</td>
            <td style="width:500px" class="text-center" *ngIf="i.reserve.vehicle==null"></td>
            <td style="width:500px" class="text-center">{{i.space.zone.parking_lot.headquarter.name}}</td>
            <td style="width:500px" class="text-center">{{i.space.zone.parking_lot.name}}</td>
            <td style="width:500px" class="text-center">{{i.space.zone.name}}</td>
            <td style="width:500px" class="text-center">{{i.space.name}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>



















